function updatePlayerRotation(e){const t=controller.keyState;!t.left&&!t.right||t.left&&t.right||(t.left?yourData.orientation.rotation-=e:yourData.orientation.rotation+=e)}const canvas={init:function(){},collision:{check:function(){}},render:{image:{components:{ship:{name:"rocket-frame",friendlyName:"rocket",extension:"png",frame:{current:1,max:3,delay:300,nextTime:0},elements:[]}},request:{frame:function(e){const t=canvas.render.image.components[e];if(t){const e=t.frame,n=(new Date).getTime();return n>e.nextTime&&(e.nextTime=n+e.delay,e.current++,e.current>e.max&&(e.current=1)),e.current}},componentElement:function(e,t){const n=canvas.render.image.components[e];if(n){if(void 0==n.elements[t-1]){const e=document.createElement("img");e.src="img/"+n.name+t+"."+n.extension,e.alt=n.friendlyName,n.elements[t-1]={element:e,loaded:!1},e.addEventListener("load",function(e){n.elements[t-1].loaded=!0})}return n.elements[t-1]}}}},func:function(e){var t=1;void 0!=canvas.render.lastTimeStamp&&(t=(e-canvas.render.lastTimeStamp)/17);const n=document.getElementsByTagName("canvas")[0],a=n.width,i=n.height;var o=n.getContext("2d");o.clearRect(0,0,a,i),o.fillStyle="rgb(230,230,230)",o.fillRect(0,0,a,i);const r=document.getElementById("rocket");o.rotate(0),o.textAlign="center",o.font="20px Georgia";const m=canvas.render.image.request;updatePlayerRotation(t);for(const e in playersData){const n=playersData[e];if(void 0!=n.orientation){const e=n.orientation.position;n.orientation.velocity;let s=n.orientation.rotation;const c=3.141592653*(s-90)*2/360,l=.2*t;e.x+=Math.cos(c)*l,e.y+=Math.sin(c)*l,e.x>100?e.x=100:e.x<0&&(e.x=0),e.y>100?e.y=100:e.y<0&&(e.y=0);const d=25,u=75,f=e.x/100*(a-80)+40,v=e.y/100*(i-80)+40;s*=Math.PI/180,o.translate(f,v),void 0!=n.username&&(o.fillStyle="black",o.fillText(n.username,0,-50)),o.rotate(s);const y=m.frame("ship"),g=m.componentElement("ship",y);let h=r;void 0!=g&&g.loaded&&(h=g.element),o.drawImage(h,-d/2,-u/2,d,u),o.rotate(-s),o.translate(-f,-v)}}"requestAnimationFrame"in window?canvas.render.animationFrameRequest=window.requestAnimationFrame(canvas.render.func):canvas.render.animationTimer=setTimeout(canvas.render.func,30,(new Date).getTime())},start:function(){void 0==this.animationFrameRequest&&("requestAnimationFrame"in window?this.animationFrameRequest=window.requestAnimationFrame(this.func):canvas.render.animationTimer=setTimeout(canvas.render.func,30,(new Date).getTime()))},stop:function(){void 0!=this.animationFrameRequest?(window.cancelAnimationFrame(this.animationFrameRequest),delete this.animationFrameRequest):void 0!=this.animationTimer&&(clearTimeout(this.animationTimer),delete this.animationTimer)}}};canvas.init();