const canvas={init:function(){},collision:{check:function(){}},render:{image:{components:{ship:{name:"rocket-frame",friendlyName:"rocket",extension:"png",currentFrame:1,maxFrames:3,elements:[]}},request:{frame:function(e){const n=canvas.render.image.components[e];if(n)return n.currentFrame++,n.currentFrame>n.maxFrames&&(n.currentFrame=1),n.currentFrame},componentElement:function(e,n){const t=canvas.render.image.components[e];if(t){if(void 0!=t.elements[n-1])return t.elements[n-1];{const e=document.createElement("img");e.src="img/"+t.name+n+"."+t.extension,e.alt=t.friendlyName,t.elements[n-1]={element:e,loaded:!1},e.addEventListener("load",function(e){console.log("loaded frame")})}}}}},func:function(e){var n=1;void 0!=canvas.render.lastTimeStamp&&(n=(e-canvas.render.lastTimeStamp)/17);const t=document.getElementsByTagName("canvas")[0],a=t.width,i=t.height;var r=t.getContext("2d");r.clearRect(0,0,a,i),r.fillStyle="rgb(230,230,230)",r.fillRect(0,0,a,i);const o=document.getElementById("rocket");r.rotate(0),r.textAlign="center",r.font="20px Georgia";const m=canvas.render.image.request;for(const e in playersData){const t=playersData[e];if(void 0!=t.orientation){const e=t.orientation.position;t.orientation.velocity;let s=t.orientation.rotation;const c=3.141592653*(s-90)*2/360,l=.2*n;e.x+=Math.cos(c)*l,e.y+=Math.sin(c)*l,e.x>100?e.x=100:e.x<0&&(e.x=0),e.y>100?e.y=100:e.y<0&&(e.y=0);const d=25,u=75,f=e.x/100*(a-80)+40,v=e.y/100*(i-80)+40;s*=Math.PI/180,r.translate(f,v),void 0!=t.username&&(r.fillStyle="black",r.fillText(t.username,0,-50)),r.rotate(s);const g=m.frame("ship"),h=m.componentElement("ship",g);let F=o;h.loaded||(F=h.element),r.drawImage(F,-d/2,-u/2,d,u),r.rotate(-s),r.translate(-f,-v)}}"requestAnimationFrame"in window?canvas.render.animationFrameRequest=window.requestAnimationFrame(canvas.render.func):canvas.render.animationTimer=setTimeout(canvas.render.func,30,(new Date).getTime())},start:function(){void 0==this.animationFrameRequest&&("requestAnimationFrame"in window?this.animationFrameRequest=window.requestAnimationFrame(this.func):canvas.render.animationTimer=setTimeout(canvas.render.func,30,(new Date).getTime()))},stop:function(){void 0!=this.animationFrameRequest?(window.cancelAnimationFrame(this.animationFrameRequest),delete this.animationFrameRequest):void 0!=this.animationTimer&&(clearTimeout(this.animationTimer),delete this.animationTimer)}}};canvas.init();