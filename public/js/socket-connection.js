let socket,connectionError=!1;window.addEventListener("load",function(){(socket=io.connect("http://62d0a5be.ngrok.io")).on("onPlayerConnect_s",function(o,n){playersData=o.playersData,yourData=playersData[o.id],frameRender.start(),startStreamOrientation(),createMapImage(n),controller.init(),socket.on("onRemotePlayerConnect_s",function(o){const n=o.id;playersData[n]=o}),socket.on("onPlayerDisconnect_s",function(o){delete playersData[o]}),attachSocketForUsername(),attachSocketForOrientation(),attachSocketForProjectile(),attachSocketForMapImage()}),socket.on("onPlayerReconnect_s",function(o,n){playersData=o.playersData,yourData=playersData[o.id],connectionError=!1}),socket.on("connect_timeout",function(){console.log("connection timeout")}),socket.on("connect_error",function(){connectionError=!0,console.log("connect_error")}),socket.on("reconnect",function(){socket.emit("onPlayerReconnect_c")}),socket.on("onRemotePlayerReconnect_s",function(o){console.log("onRemotePlayerReconnect_s",o);const n=playersData[o];void 0!=n&&(console.log("remove connection error"),delete n.connectError)}),socket.on("onRemotePlayerConnectionError_s",function(o){console.log("onRemotePlayerConnectionError_s",o);const n=playersData[o];void 0!=n&&(console.log("set connection error"),n.connectionError=!0)}),socket.on("ping",function(){socket.emit("ping_c")})});